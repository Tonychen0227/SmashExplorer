@model VisualizeSeedsModel

<!DOCTYPE HTML>
<html>
<head>
<script>
    window.onload = function () {
        var dataPoints = []

        @foreach (var dataPoint in Model.DataPoints)
        {
            @:dataPoints.push({ x: @dataPoint.Placement.ToString(), y: @dataPoint.SPR});
        }

        console.log(@Model.DataPoints.Count());

        const data = {
            datasets: [{
                label: 'SPR',
                data: dataPoints,
                backgroundColor: 'rgb(255, 39, 104)'
            }],
        };

        const config = {
            type: 'scatter',
            data: data,
            options: {
                scales: {
                    x: {
                        type: 'linear',
                        position: 'bottom',
                        title: {
                            display: true,
                            text: 'Placement',
                            font: {
                                size: 20,
                                weight: 'bold',
                                lineHeight: 1.2,
                            },
                            padding: { top: 20, left: 0, right: 0, bottom: 0 }
                        },
                        ticks: {
                            callback: function (val, index) {
                                // Hide the label of every 2nd dataset
                                if (val == -1) {
                                    return 0;
                                }

                                var array = [1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129]

                                return array[val]
                            },
                            stepSize: 1
                        },
                        min: -1
                    },
                    y: {
                        type: 'linear',
                        position: 'bottom',
                        title: {
                            display: true,
                            text: 'SPR',
                            font: {
                                size: 20,
                                weight: 'bold',
                                lineHeight: 1.2,
                            },
                            padding: { top: 20, left: 0, right: 0, bottom: 0 }
                        }
                    }
                }
            }
        };

        const myChart = new Chart(
            document.getElementById('myChart'),
            config
        );
	}
</script>
</head>
<body>
    <div class="jumbotron">
        <h1>Visualize Zeeds</h1>
        <h3><a href="https://www.smash.gg/@Model.Event.Slug">@Model.Event.Name</a> @@ @Model.Event.TournamentName</h3>
        <p>SPR = <a href="https://www.pgstats.com/articles/introducing-spr-and-uf" target="_blank">Seed Performance Rating</a></p>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <canvas id="myChart"></canvas>
</body>
</html>